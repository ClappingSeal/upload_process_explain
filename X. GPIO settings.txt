1. 파이썬 코드 

import RPi.GPIO as GPIO
import time
import subprocess

# GPIO 핀 번호 설정
BUTTON_PIN = 17  # 사용하고자 하는 핀 번호로 변경하세요

# GPIO 설정
GPIO.setmode(GPIO.BCM)
GPIO.setup(BUTTON_PIN, GPIO.IN, pull_up_down=GPIO.PUD_UP)

def button_callback(channel):
    print("Button was pushed!")
    subprocess.run(["ros2", "run", "drone_package", "drone_node1"])

# 버튼 눌림 이벤트 감지
GPIO.add_event_detect(BUTTON_PIN, GPIO.FALLING, callback=button_callback, bouncetime=300)

try:
    while True:
        time.sleep(0.1)  # CPU 사용률을 낮추기 위해 잠시 대기
except KeyboardInterrupt:
    GPIO.cleanup()  # 종료 시 GPIO 핀 정리


2. 
sudo nano /etc/systemd/system/button_listener.service

3. 

[Unit]
Description=Button Listener Service
After=multi-user.target

[Service]
Type=simple
ExecStart=/usr/bin/python3 /home/pi/button_listener.py
Restart=on-failure

[Install]
WantedBy=multi-user.target


4. 
sudo chmod 644 /etc/systemd/system/button_listener.service

5. 
sudo systemctl daemon-reload
sudo systemctl enable button_listener.service
sudo systemctl start button_listener.service

